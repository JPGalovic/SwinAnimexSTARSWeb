-- Newsletter Data Core, Version 1.0.0, FEB18, JPGalovic
-- Newsletter Table, contains data for newsletter releases
CREATE TABLE IF NOT EXISTS NEWSLETTER (
		PUBLICATION_DATE		DATETIME
	,	PUBLICATION_TITLE		VARCHAR(100)
	,	PUBLICATION_VOLUME		INT(11)
	,	PRIMARY KEY				(PUBLICATION_DATE)
);

-- Newsletter Secions Table, contains definitions for article types
CREATE TABLE IF NOT EXISTS ARTICLE_TYPE (
		ARTICLE_TYPE_ID			INT(11)
	,	ARTICLE_DESCRIPTION		VARCHAR(100)
	,	PRIMARY KEY				(ARTICLE_TYPE_ID)
);

INSERT INTO ARTICLE_TYPE (ARTICLE_TYPE_ID, ARTICLE_DESCRIPTION) VALUES
		(0, "Headline")
	,	(1, "This week in news")
	,	(2, "In other news")
;

-- News Article Table, contains indervidual news articles to be displayed.
CREATE TABLE IF NOT EXISTS NEWS_ARTICLE (
		ARTICLE_DATE			DATETIME
	,	ARTICLE_HEADLINE		VARCHAR(100)
	,	ARTICLE_IMAGE_URL		VARCHAR(300)
	,	ARTICLE_TEXT			VARCHAR(1000)
	,	ARTICLE_LINK			VARCHAR(300)
	,	ARTICLE_AUTHOR			VARCHAR(100)
	,	PRIMARY KEY				(ARTICLE_DATE, ARTICLE_HEADLINE)
);

-- News Article Linker, links news articles to news letters
CREATE TABLE IF NOT EXISTS ARTICLE_LINKER (
		PUBLICATION_DATE		DATETIME
	,	ARTICLE_DATE			DATETIME
	,	ARTICLE_HEADLINE		VARCHAR(100)
	,	ARTICLE_TYPE_ID			INT(11)
	,	PRIMARY KEY				(PUBLICATION_DATE, ARTICLE_DATE, ARTICLE_HEADLINE)
	,	FOREIGN KEY				(PUBLICATION_DATE) REFERENCES NEWSLETTER (PUBLICATION_DATE)
	,	FOREIGN KEY				(ARTICLE_DATE, ARTICLE_HEADLINE) REFERENCES NEWS_ARTICLE (ARTICLE_DATE, ARTICLE_HEADLINE)
	,	FOREIGN KEY				(ARTICLE_TYPE_ID) REFERENCES ARTICLE_TYPE (ARTICLE_TYPE_ID)
);